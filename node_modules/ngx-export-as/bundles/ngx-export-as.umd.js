(function (global, factory) {
    typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports, require('@angular/core'), require('rxjs'), require('html2canvas'), require('jspdf'), require('xlsx'), require('html-docx-js/dist/html-docx')) :
    typeof define === 'function' && define.amd ? define('ngx-export-as', ['exports', '@angular/core', 'rxjs', 'html2canvas', 'jspdf', 'xlsx', 'html-docx-js/dist/html-docx'], factory) :
    (factory((global['ngx-export-as'] = {}),global.ng.core,global.rxjs,global.html2canvas,global.jsPDF,global.XLSX,global.htmlDocx));
}(this, (function (exports,i0,rxjs,html2canvas,jsPDF,XLSX,htmlDocx) { 'use strict';

    html2canvas = html2canvas && html2canvas.hasOwnProperty('default') ? html2canvas['default'] : html2canvas;

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,extraRequire,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    window['html2canvas'] = html2canvas;
    var ExportAsService = /** @class */ (function () {
        function ExportAsService() {
        }
        /**
         * @param {?} config
         * @return {?}
         */
        ExportAsService.prototype.get = /**
         * @param {?} config
         * @return {?}
         */
            function (config) {
                /** @type {?} */
                var func = 'get' + config.type.toUpperCase();
                if (this[func]) {
                    return this[func](config);
                }
                return rxjs.Observable.create(function (observer) { observer.error('Export type is not supported.'); });
            };
        /**
         * @param {?} config
         * @param {?} fileName
         * @return {?}
         */
        ExportAsService.prototype.save = /**
         * @param {?} config
         * @param {?} fileName
         * @return {?}
         */
            function (config, fileName) {
                config.download = true;
                config.fileName = fileName + '.' + config.type;
                this.get(config).subscribe();
            };
        /**
         * @param {?} content
         * @return {?}
         */
        ExportAsService.prototype.contentToBlob = /**
         * @param {?} content
         * @return {?}
         */
            function (content) {
                return rxjs.Observable.create(function (observer) {
                    /** @type {?} */
                    var arr = content.split(',');
                    /** @type {?} */
                    var mime = arr[0].match(/:(.*?);/)[1];
                    /** @type {?} */
                    var bstr = atob(arr[1]);
                    /** @type {?} */
                    var n = bstr.length;
                    /** @type {?} */
                    var u8arr = new Uint8Array(n);
                    while (n--) {
                        u8arr[n] = bstr.charCodeAt(n);
                    }
                    observer.next(new Blob([u8arr], { type: mime }));
                    observer.complete();
                });
            };
        /**
         * @param {?} fileContent
         * @return {?}
         */
        ExportAsService.prototype.removeFileTypeFromBase64 = /**
         * @param {?} fileContent
         * @return {?}
         */
            function (fileContent) {
                /** @type {?} */
                var re = /^data:[^]*;base64,/g;
                /** @type {?} */
                var newContent = re[Symbol.replace](fileContent, '');
                return newContent;
            };
        /**
         * @param {?} fileContent
         * @param {?} fileMime
         * @return {?}
         */
        ExportAsService.prototype.addFileTypeToBase64 = /**
         * @param {?} fileContent
         * @param {?} fileMime
         * @return {?}
         */
            function (fileContent, fileMime) {
                return "data:" + fileMime + ";base64," + fileContent;
            };
        /**
         * @param {?} fileName
         * @param {?} dataURL
         * @return {?}
         */
        ExportAsService.prototype.downloadFromDataURL = /**
         * @param {?} fileName
         * @param {?} dataURL
         * @return {?}
         */
            function (fileName, dataURL) {
                var _this = this;
                this.contentToBlob(dataURL).subscribe(function (blob) {
                    _this.downloadFromBlob(blob, fileName);
                });
            };
        /**
         * @param {?} blob
         * @param {?} fileName
         * @return {?}
         */
        ExportAsService.prototype.downloadFromBlob = /**
         * @param {?} blob
         * @param {?} fileName
         * @return {?}
         */
            function (blob, fileName) {
                /** @type {?} */
                var element = document.createElement('a');
                /** @type {?} */
                var url = window.URL.createObjectURL(blob);
                element.setAttribute('download', fileName);
                element.style.display = 'none';
                document.body.appendChild(element);
                element.href = url;
                element.click();
                document.body.removeChild(element);
            };
        /**
         * @private
         * @param {?} config
         * @return {?}
         */
        ExportAsService.prototype.getPDF = /**
         * @private
         * @param {?} config
         * @return {?}
         */
            function (config) {
                return rxjs.Observable.create(function (observer) {
                    /** @type {?} */
                    var jspdf = new jsPDF();
                    /** @type {?} */
                    var element = document.getElementById(config.elementId);
                    jspdf.addHTML(element, function () {
                        if (config.download) {
                            jspdf.save(config.fileName);
                            observer.next();
                        }
                        else {
                            observer.next(jspdf.output('datauristring'));
                        }
                        observer.complete();
                    });
                });
            };
        /**
         * @private
         * @param {?} config
         * @return {?}
         */
        ExportAsService.prototype.getPNG = /**
         * @private
         * @param {?} config
         * @return {?}
         */
            function (config) {
                var _this = this;
                return rxjs.Observable.create(function (observer) {
                    /** @type {?} */
                    var element = document.getElementById(config.elementId);
                    html2canvas(element, config.options).then(function (canvas) {
                        /** @type {?} */
                        var imgData = canvas.toDataURL('image/PNG');
                        if (config.type === 'png' && config.download) {
                            _this.downloadFromDataURL(config.fileName, imgData);
                            observer.next();
                        }
                        else {
                            observer.next(imgData);
                        }
                        observer.complete();
                    }, function (err) {
                        observer.error(err);
                    });
                });
            };
        /**
         * @private
         * @param {?} config
         * @return {?}
         */
        ExportAsService.prototype.getCSV = /**
         * @private
         * @param {?} config
         * @return {?}
         */
            function (config) {
                var _this = this;
                return rxjs.Observable.create(function (observer) {
                    /** @type {?} */
                    var element = document.getElementById(config.elementId);
                    /** @type {?} */
                    var csv = [];
                    /** @type {?} */
                    var rows = element.querySelectorAll('table tr');
                    rows.forEach(function (rowElement, index) {
                        /** @type {?} */
                        var row = [];
                        /** @type {?} */
                        var cols = rowElement.querySelectorAll('td, th');
                        cols.forEach(function (col, colIndex) {
                            row.push(col.innerText);
                        });
                        csv.push(row.join(','));
                    });
                    /** @type {?} */
                    var csvContent = 'data:text/csv;base64,' + btoa(csv.join('\n'));
                    if (config.download) {
                        _this.downloadFromDataURL(config.fileName, csvContent);
                        observer.next();
                    }
                    else {
                        observer.next(csvContent);
                    }
                    observer.complete();
                });
            };
        /**
         * @private
         * @param {?} config
         * @return {?}
         */
        ExportAsService.prototype.getTXT = /**
         * @private
         * @param {?} config
         * @return {?}
         */
            function (config) {
                /** @type {?} */
                var nameFrags = config.fileName.split('.');
                config.fileName = nameFrags[0] + ".txt";
                return this.getCSV(config);
            };
        /**
         * @private
         * @param {?} config
         * @return {?}
         */
        ExportAsService.prototype.getXLS = /**
         * @private
         * @param {?} config
         * @return {?}
         */
            function (config) {
                var _this = this;
                return rxjs.Observable.create(function (observer) {
                    /** @type {?} */
                    var element = document.getElementById(config.elementId);
                    /** @type {?} */
                    var ws3 = XLSX.utils.table_to_sheet(element, config.options);
                    /** @type {?} */
                    var wb = XLSX.utils.book_new();
                    XLSX.utils.book_append_sheet(wb, ws3, config.fileName);
                    /** @type {?} */
                    var out = XLSX.write(wb, { type: 'base64' });
                    /** @type {?} */
                    var xlsContent = 'data:application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;base64,' + out;
                    if (config.download) {
                        _this.downloadFromDataURL(config.fileName, xlsContent);
                        observer.next();
                    }
                    else {
                        observer.next(xlsContent);
                    }
                    observer.complete();
                });
            };
        /**
         * @private
         * @param {?} config
         * @return {?}
         */
        ExportAsService.prototype.getXLSX = /**
         * @private
         * @param {?} config
         * @return {?}
         */
            function (config) {
                return this.getXLS(config);
            };
        /**
         * @private
         * @param {?} config
         * @return {?}
         */
        ExportAsService.prototype.getDOCX = /**
         * @private
         * @param {?} config
         * @return {?}
         */
            function (config) {
                var _this = this;
                return rxjs.Observable.create(function (observer) {
                    /** @type {?} */
                    var contentDocument = document.getElementById(config.elementId).outerHTML;
                    /** @type {?} */
                    var content = '<!DOCTYPE html>' + contentDocument;
                    /** @type {?} */
                    var converted = htmlDocx.asBlob(content, config.options);
                    if (config.download) {
                        _this.downloadFromBlob(converted, config.fileName);
                        observer.next();
                        observer.complete();
                    }
                    else {
                        /** @type {?} */
                        var reader_1 = new FileReader();
                        reader_1.onloadend = function () {
                            /** @type {?} */
                            var base64data = reader_1.result;
                            observer.next(base64data);
                            observer.complete();
                        };
                        reader_1.readAsDataURL(converted);
                    }
                });
            };
        /**
         * @private
         * @param {?} config
         * @return {?}
         */
        ExportAsService.prototype.getDOC = /**
         * @private
         * @param {?} config
         * @return {?}
         */
            function (config) {
                return this.getDOCX(config);
            };
        /**
         * @private
         * @param {?} config
         * @return {?}
         */
        ExportAsService.prototype.getJSON = /**
         * @private
         * @param {?} config
         * @return {?}
         */
            function (config) {
                var _this = this;
                return rxjs.Observable.create(function (observer) {
                    /** @type {?} */
                    var data = [];
                    // first row needs to be headers
                    /** @type {?} */
                    var headers = [];
                    /** @type {?} */
                    var table = ( /** @type {?} */(document.getElementById(config.elementId)));
                    for (var index = 0; index < table.rows[0].cells.length; index++) {
                        headers[index] = table.rows[0].cells[index].innerHTML.toLowerCase().replace(/ /gi, '');
                    }
                    // go through cells
                    for (var i = 1; i < table.rows.length; i++) {
                        /** @type {?} */
                        var tableRow = table.rows[i];
                        /** @type {?} */
                        var rowData = {};
                        for (var j = 0; j < tableRow.cells.length; j++) {
                            rowData[headers[j]] = tableRow.cells[j].innerHTML;
                        }
                        data.push(rowData);
                    }
                    /** @type {?} */
                    var jsonString = JSON.stringify(data);
                    /** @type {?} */
                    var jsonBase64 = btoa(jsonString);
                    /** @type {?} */
                    var dataStr = 'data:text/json;base64,' + jsonBase64;
                    if (config.download) {
                        _this.downloadFromDataURL(config.fileName, dataStr);
                        observer.next();
                    }
                    else {
                        observer.next(data);
                    }
                    observer.complete();
                });
            };
        /**
         * @private
         * @param {?} config
         * @return {?}
         */
        ExportAsService.prototype.getXML = /**
         * @private
         * @param {?} config
         * @return {?}
         */
            function (config) {
                var _this = this;
                return rxjs.Observable.create(function (observer) {
                    /** @type {?} */
                    var xml = '<?xml version="1.0" encoding="UTF-8"?><Root><Classes>';
                    /** @type {?} */
                    var tritem = document.getElementById(config.elementId).getElementsByTagName('tr');
                    for (var i = 0; i < tritem.length; i++) {
                        /** @type {?} */
                        var celldata = tritem[i];
                        if (celldata.cells.length > 0) {
                            xml += '<Class name="' + celldata.cells[0].textContent + '">\n';
                            for (var m = 1; m < celldata.cells.length; ++m) {
                                xml += '\t<data>' + celldata.cells[m].textContent + '</data>\n';
                            }
                            xml += '</Class>\n';
                        }
                    }
                    xml += '</Classes></Root>';
                    /** @type {?} */
                    var base64 = 'data:text/xml;base64,' + btoa(xml);
                    if (config.download) {
                        _this.downloadFromDataURL(config.fileName, base64);
                        observer.next();
                    }
                    else {
                        observer.next(base64);
                    }
                    observer.complete();
                });
            };
        ExportAsService.decorators = [
            { type: i0.Injectable, args: [{
                        providedIn: 'root'
                    },] }
        ];
        /** @nocollapse */
        ExportAsService.ctorParameters = function () { return []; };
        /** @nocollapse */ ExportAsService.ngInjectableDef = i0.defineInjectable({ factory: function ExportAsService_Factory() { return new ExportAsService(); }, token: ExportAsService, providedIn: "root" });
        return ExportAsService;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,extraRequire,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var ExportAsModule = /** @class */ (function () {
        function ExportAsModule() {
        }
        ExportAsModule.decorators = [
            { type: i0.NgModule, args: [{
                        providers: [ExportAsService],
                    },] }
        ];
        return ExportAsModule;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,extraRequire,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,extraRequire,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */

    exports.ExportAsService = ExportAsService;
    exports.ExportAsModule = ExportAsModule;

    Object.defineProperty(exports, '__esModule', { value: true });

})));

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibmd4LWV4cG9ydC1hcy51bWQuanMubWFwIiwic291cmNlcyI6WyJuZzovL25neC1leHBvcnQtYXMvbGliL2V4cG9ydC1hcy5zZXJ2aWNlLnRzIiwibmc6Ly9uZ3gtZXhwb3J0LWFzL2xpYi9leHBvcnQtYXMubW9kdWxlLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEluamVjdGFibGUgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7IE9ic2VydmFibGUgfSBmcm9tICdyeGpzJztcblxuaW1wb3J0IHsgRXhwb3J0QXNDb25maWcgfSBmcm9tICcuL2V4cG9ydC1hcy1jb25maWcubW9kZWwnO1xuXG5pbXBvcnQgaHRtbDJjYW52YXMgZnJvbSAnaHRtbDJjYW52YXMnO1xuaW1wb3J0ICogYXMganNQREYgZnJvbSAnanNwZGYnO1xuaW1wb3J0ICogYXMgWExTWCBmcm9tICd4bHN4JztcbmltcG9ydCAqIGFzIGh0bWxEb2N4IGZyb20gJ2h0bWwtZG9jeC1qcy9kaXN0L2h0bWwtZG9jeCc7XG5cbndpbmRvd1snaHRtbDJjYW52YXMnXSA9IGh0bWwyY2FudmFzO1xuXG5ASW5qZWN0YWJsZSh7XG4gIHByb3ZpZGVkSW46ICdyb290J1xufSlcbmV4cG9ydCBjbGFzcyBFeHBvcnRBc1NlcnZpY2Uge1xuXG4gIGNvbnN0cnVjdG9yKCkgeyB9XG5cbiAgZ2V0KGNvbmZpZzogRXhwb3J0QXNDb25maWcpOiBPYnNlcnZhYmxlPHN0cmluZyB8IG51bGw+IHtcbiAgICBjb25zdCBmdW5jID0gJ2dldCcgKyBjb25maWcudHlwZS50b1VwcGVyQ2FzZSgpO1xuICAgIGlmICh0aGlzW2Z1bmNdKSB7XG4gICAgICByZXR1cm4gdGhpc1tmdW5jXShjb25maWcpO1xuICAgIH1cblxuICAgIHJldHVybiBPYnNlcnZhYmxlLmNyZWF0ZSgob2JzZXJ2ZXIpID0+IHsgb2JzZXJ2ZXIuZXJyb3IoJ0V4cG9ydCB0eXBlIGlzIG5vdCBzdXBwb3J0ZWQuJyk7IH0pO1xuICB9XG5cbiAgc2F2ZShjb25maWc6IEV4cG9ydEFzQ29uZmlnLCBmaWxlTmFtZTogc3RyaW5nKTogdm9pZCB7XG4gICAgY29uZmlnLmRvd25sb2FkID0gdHJ1ZTtcbiAgICBjb25maWcuZmlsZU5hbWUgPSBmaWxlTmFtZSArICcuJyArIGNvbmZpZy50eXBlO1xuICAgIHRoaXMuZ2V0KGNvbmZpZykuc3Vic2NyaWJlKCk7XG4gIH1cblxuICBjb250ZW50VG9CbG9iKGNvbnRlbnQ6IHN0cmluZyk6IE9ic2VydmFibGU8QmxvYj4ge1xuICAgIHJldHVybiBPYnNlcnZhYmxlLmNyZWF0ZSgob2JzZXJ2ZXIpID0+IHtcbiAgICAgIGNvbnN0IGFyciA9IGNvbnRlbnQuc3BsaXQoJywnKSwgbWltZSA9IGFyclswXS5tYXRjaCgvOiguKj8pOy8pWzFdLFxuICAgICAgICBic3RyID0gYXRvYihhcnJbMV0pO1xuICAgICAgbGV0IG4gPSBic3RyLmxlbmd0aDtcbiAgICAgIGNvbnN0IHU4YXJyID0gbmV3IFVpbnQ4QXJyYXkobik7XG4gICAgICB3aGlsZSAobi0tKSB7XG4gICAgICAgIHU4YXJyW25dID0gYnN0ci5jaGFyQ29kZUF0KG4pO1xuICAgICAgfVxuICAgICAgb2JzZXJ2ZXIubmV4dChuZXcgQmxvYihbdThhcnJdLCB7IHR5cGU6IG1pbWUgfSkpO1xuICAgICAgb2JzZXJ2ZXIuY29tcGxldGUoKTtcbiAgICB9KTtcbiAgfVxuXG4gIHJlbW92ZUZpbGVUeXBlRnJvbUJhc2U2NChmaWxlQ29udGVudDogc3RyaW5nKTogc3RyaW5nIHtcbiAgICBjb25zdCByZSA9IC9eZGF0YTpbXl0qO2Jhc2U2NCwvZztcbiAgICBjb25zdCBuZXdDb250ZW50OiBzdHJpbmcgPSByZVtTeW1ib2wucmVwbGFjZV0oZmlsZUNvbnRlbnQsICcnKTtcbiAgICByZXR1cm4gbmV3Q29udGVudDtcbiAgfVxuXG4gIGFkZEZpbGVUeXBlVG9CYXNlNjQoZmlsZUNvbnRlbnQ6IHN0cmluZywgZmlsZU1pbWU6IHN0cmluZyk6IHN0cmluZyB7XG4gICAgcmV0dXJuIGBkYXRhOiR7ZmlsZU1pbWV9O2Jhc2U2NCwke2ZpbGVDb250ZW50fWA7XG4gIH1cblxuICBkb3dubG9hZEZyb21EYXRhVVJMKGZpbGVOYW1lOiBzdHJpbmcsIGRhdGFVUkw6IHN0cmluZyk6IHZvaWQge1xuICAgIHRoaXMuY29udGVudFRvQmxvYihkYXRhVVJMKS5zdWJzY3JpYmUoYmxvYiA9PiB7XG4gICAgICB0aGlzLmRvd25sb2FkRnJvbUJsb2IoYmxvYiwgZmlsZU5hbWUpO1xuICAgIH0pO1xuICB9XG5cbiAgZG93bmxvYWRGcm9tQmxvYihibG9iOiBCbG9iLCBmaWxlTmFtZTogc3RyaW5nKSB7XG4gICAgY29uc3QgZWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2EnKTtcbiAgICBjb25zdCB1cmwgPSB3aW5kb3cuVVJMLmNyZWF0ZU9iamVjdFVSTChibG9iKTtcbiAgICBlbGVtZW50LnNldEF0dHJpYnV0ZSgnZG93bmxvYWQnLCBmaWxlTmFtZSk7XG4gICAgZWxlbWVudC5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoZWxlbWVudCk7XG4gICAgZWxlbWVudC5ocmVmID0gdXJsO1xuICAgIGVsZW1lbnQuY2xpY2soKTtcbiAgICBkb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKGVsZW1lbnQpO1xuICB9XG5cbiAgcHJpdmF0ZSBnZXRQREYoY29uZmlnOiBFeHBvcnRBc0NvbmZpZyk6IE9ic2VydmFibGU8c3RyaW5nIHwgbnVsbD4ge1xuICAgIHJldHVybiBPYnNlcnZhYmxlLmNyZWF0ZSgob2JzZXJ2ZXIpID0+IHtcbiAgICAgIGNvbnN0IGpzcGRmID0gbmV3IGpzUERGKCk7XG4gICAgICBjb25zdCBlbGVtZW50OiBIVE1MRWxlbWVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGNvbmZpZy5lbGVtZW50SWQpO1xuICAgICAganNwZGYuYWRkSFRNTChlbGVtZW50LCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmIChjb25maWcuZG93bmxvYWQpIHtcbiAgICAgICAgICBqc3BkZi5zYXZlKGNvbmZpZy5maWxlTmFtZSk7XG4gICAgICAgICAgb2JzZXJ2ZXIubmV4dCgpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIG9ic2VydmVyLm5leHQoanNwZGYub3V0cHV0KCdkYXRhdXJpc3RyaW5nJykpO1xuICAgICAgICB9XG4gICAgICAgIG9ic2VydmVyLmNvbXBsZXRlKCk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfVxuXG4gIHByaXZhdGUgZ2V0UE5HKGNvbmZpZzogRXhwb3J0QXNDb25maWcpOiBPYnNlcnZhYmxlPHN0cmluZyB8IG51bGw+IHtcbiAgICByZXR1cm4gT2JzZXJ2YWJsZS5jcmVhdGUoKG9ic2VydmVyKSA9PiB7XG4gICAgICBjb25zdCBlbGVtZW50OiBIVE1MRWxlbWVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGNvbmZpZy5lbGVtZW50SWQpO1xuICAgICAgaHRtbDJjYW52YXMoZWxlbWVudCwgY29uZmlnLm9wdGlvbnMpLnRoZW4oKGNhbnZhcykgPT4ge1xuICAgICAgICBjb25zdCBpbWdEYXRhID0gY2FudmFzLnRvRGF0YVVSTCgnaW1hZ2UvUE5HJyk7XG4gICAgICAgIGlmIChjb25maWcudHlwZSA9PT0gJ3BuZycgJiYgY29uZmlnLmRvd25sb2FkKSB7XG4gICAgICAgICAgdGhpcy5kb3dubG9hZEZyb21EYXRhVVJMKGNvbmZpZy5maWxlTmFtZSwgaW1nRGF0YSk7XG4gICAgICAgICAgb2JzZXJ2ZXIubmV4dCgpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIG9ic2VydmVyLm5leHQoaW1nRGF0YSk7XG4gICAgICAgIH1cbiAgICAgICAgb2JzZXJ2ZXIuY29tcGxldGUoKTtcbiAgICAgIH0sIGVyciA9PiB7XG4gICAgICAgIG9ic2VydmVyLmVycm9yKGVycik7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfVxuXG4gIHByaXZhdGUgZ2V0Q1NWKGNvbmZpZzogRXhwb3J0QXNDb25maWcpOiBPYnNlcnZhYmxlPHN0cmluZyB8IG51bGw+IHtcbiAgICByZXR1cm4gT2JzZXJ2YWJsZS5jcmVhdGUoKG9ic2VydmVyKSA9PiB7XG4gICAgICBjb25zdCBlbGVtZW50OiBIVE1MRWxlbWVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGNvbmZpZy5lbGVtZW50SWQpO1xuICAgICAgY29uc3QgY3N2ID0gW107XG4gICAgICBjb25zdCByb3dzOiBhbnkgPSBlbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ3RhYmxlIHRyJyk7XG4gICAgICByb3dzLmZvckVhY2goKHJvd0VsZW1lbnQsIGluZGV4OiBudW1iZXIpID0+IHtcbiAgICAgICAgY29uc3Qgcm93ID0gW107XG4gICAgICAgIGNvbnN0IGNvbHMgPSByb3dFbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ3RkLCB0aCcpO1xuICAgICAgICBjb2xzLmZvckVhY2goKGNvbCwgY29sSW5kZXg6IG51bWJlcikgPT4ge1xuICAgICAgICAgIHJvdy5wdXNoKGNvbC5pbm5lclRleHQpO1xuICAgICAgICB9KTtcbiAgICAgICAgY3N2LnB1c2gocm93LmpvaW4oJywnKSk7XG4gICAgICB9KTtcbiAgICAgIGNvbnN0IGNzdkNvbnRlbnQgPSAnZGF0YTp0ZXh0L2NzdjtiYXNlNjQsJyArIGJ0b2EoY3N2LmpvaW4oJ1xcbicpKTtcbiAgICAgIGlmIChjb25maWcuZG93bmxvYWQpIHtcbiAgICAgICAgdGhpcy5kb3dubG9hZEZyb21EYXRhVVJMKGNvbmZpZy5maWxlTmFtZSwgY3N2Q29udGVudCk7XG4gICAgICAgIG9ic2VydmVyLm5leHQoKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIG9ic2VydmVyLm5leHQoY3N2Q29udGVudCk7XG4gICAgICB9XG4gICAgICBvYnNlcnZlci5jb21wbGV0ZSgpO1xuICAgIH0pO1xuICB9XG5cbiAgcHJpdmF0ZSBnZXRUWFQoY29uZmlnOiBFeHBvcnRBc0NvbmZpZyk6IE9ic2VydmFibGU8c3RyaW5nIHwgbnVsbD4ge1xuICAgIGNvbnN0IG5hbWVGcmFncyA9IGNvbmZpZy5maWxlTmFtZS5zcGxpdCgnLicpO1xuICAgIGNvbmZpZy5maWxlTmFtZSA9IGAke25hbWVGcmFnc1swXX0udHh0YDtcbiAgICByZXR1cm4gdGhpcy5nZXRDU1YoY29uZmlnKTtcbiAgfVxuXG4gIHByaXZhdGUgZ2V0WExTKGNvbmZpZzogRXhwb3J0QXNDb25maWcpOiBPYnNlcnZhYmxlPHN0cmluZyB8IG51bGw+IHtcbiAgICByZXR1cm4gT2JzZXJ2YWJsZS5jcmVhdGUoKG9ic2VydmVyKSA9PiB7XG5cbiAgICAgIGNvbnN0IGVsZW1lbnQ6IEhUTUxFbGVtZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoY29uZmlnLmVsZW1lbnRJZCk7XG4gICAgICBjb25zdCB3czMgPSBYTFNYLnV0aWxzLnRhYmxlX3RvX3NoZWV0KGVsZW1lbnQsIGNvbmZpZy5vcHRpb25zKTtcbiAgICAgIGNvbnN0IHdiID0gWExTWC51dGlscy5ib29rX25ldygpO1xuICAgICAgWExTWC51dGlscy5ib29rX2FwcGVuZF9zaGVldCh3Yiwgd3MzLCBjb25maWcuZmlsZU5hbWUpO1xuICAgICAgY29uc3Qgb3V0ID0gWExTWC53cml0ZSh3YiwgeyB0eXBlOiAnYmFzZTY0JyB9KTtcbiAgICAgIGNvbnN0IHhsc0NvbnRlbnQgPSAnZGF0YTphcHBsaWNhdGlvbi92bmQub3BlbnhtbGZvcm1hdHMtb2ZmaWNlZG9jdW1lbnQuc3ByZWFkc2hlZXRtbC5zaGVldDtiYXNlNjQsJyArIG91dDtcbiAgICAgIGlmIChjb25maWcuZG93bmxvYWQpIHtcbiAgICAgICAgdGhpcy5kb3dubG9hZEZyb21EYXRhVVJMKGNvbmZpZy5maWxlTmFtZSwgeGxzQ29udGVudCk7XG4gICAgICAgIG9ic2VydmVyLm5leHQoKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIG9ic2VydmVyLm5leHQoeGxzQ29udGVudCk7XG4gICAgICB9XG4gICAgICBvYnNlcnZlci5jb21wbGV0ZSgpO1xuICAgIH0pO1xuICB9XG5cbiAgcHJpdmF0ZSBnZXRYTFNYKGNvbmZpZzogRXhwb3J0QXNDb25maWcpOiBPYnNlcnZhYmxlPHN0cmluZyB8IG51bGw+IHtcbiAgICByZXR1cm4gdGhpcy5nZXRYTFMoY29uZmlnKTtcbiAgfVxuXG4gIHByaXZhdGUgZ2V0RE9DWChjb25maWc6IEV4cG9ydEFzQ29uZmlnKTogT2JzZXJ2YWJsZTxzdHJpbmcgfCBudWxsPiB7XG4gICAgcmV0dXJuIE9ic2VydmFibGUuY3JlYXRlKChvYnNlcnZlcikgPT4ge1xuICAgICAgY29uc3QgY29udGVudERvY3VtZW50OiBzdHJpbmcgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChjb25maWcuZWxlbWVudElkKS5vdXRlckhUTUw7XG4gICAgICBjb25zdCBjb250ZW50ID0gJzwhRE9DVFlQRSBodG1sPicgKyBjb250ZW50RG9jdW1lbnQ7XG4gICAgICBjb25zdCBjb252ZXJ0ZWQgPSBodG1sRG9jeC5hc0Jsb2IoY29udGVudCwgY29uZmlnLm9wdGlvbnMpO1xuICAgICAgaWYgKGNvbmZpZy5kb3dubG9hZCkge1xuICAgICAgICB0aGlzLmRvd25sb2FkRnJvbUJsb2IoY29udmVydGVkLCBjb25maWcuZmlsZU5hbWUpO1xuICAgICAgICBvYnNlcnZlci5uZXh0KCk7XG4gICAgICAgIG9ic2VydmVyLmNvbXBsZXRlKCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb25zdCByZWFkZXIgPSBuZXcgRmlsZVJlYWRlcigpO1xuICAgICAgICByZWFkZXIub25sb2FkZW5kID0gKCkgPT4ge1xuICAgICAgICAgIGNvbnN0IGJhc2U2NGRhdGEgPSByZWFkZXIucmVzdWx0O1xuICAgICAgICAgIG9ic2VydmVyLm5leHQoYmFzZTY0ZGF0YSk7XG4gICAgICAgICAgb2JzZXJ2ZXIuY29tcGxldGUoKTtcbiAgICAgICAgfTtcbiAgICAgICAgcmVhZGVyLnJlYWRBc0RhdGFVUkwoY29udmVydGVkKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIHByaXZhdGUgZ2V0RE9DKGNvbmZpZzogRXhwb3J0QXNDb25maWcpOiBPYnNlcnZhYmxlPHN0cmluZyB8IG51bGw+IHtcbiAgICByZXR1cm4gdGhpcy5nZXRET0NYKGNvbmZpZyk7XG4gIH1cblxuICBwcml2YXRlIGdldEpTT04oY29uZmlnOiBFeHBvcnRBc0NvbmZpZyk6IE9ic2VydmFibGU8YW55W10gfCBudWxsPiB7XG4gICAgcmV0dXJuIE9ic2VydmFibGUuY3JlYXRlKChvYnNlcnZlcikgPT4ge1xuICAgICAgY29uc3QgZGF0YSA9IFtdOyAvLyBmaXJzdCByb3cgbmVlZHMgdG8gYmUgaGVhZGVyc1xuICAgICAgY29uc3QgaGVhZGVycyA9IFtdO1xuICAgICAgY29uc3QgdGFibGUgPSA8SFRNTFRhYmxlRWxlbWVudD5kb2N1bWVudC5nZXRFbGVtZW50QnlJZChjb25maWcuZWxlbWVudElkKTtcbiAgICAgIGZvciAobGV0IGluZGV4ID0gMDsgaW5kZXggPCB0YWJsZS5yb3dzWzBdLmNlbGxzLmxlbmd0aDsgaW5kZXgrKykge1xuICAgICAgICBoZWFkZXJzW2luZGV4XSA9IHRhYmxlLnJvd3NbMF0uY2VsbHNbaW5kZXhdLmlubmVySFRNTC50b0xvd2VyQ2FzZSgpLnJlcGxhY2UoLyAvZ2ksICcnKTtcbiAgICAgIH1cbiAgICAgIC8vIGdvIHRocm91Z2ggY2VsbHNcbiAgICAgIGZvciAobGV0IGkgPSAxOyBpIDwgdGFibGUucm93cy5sZW5ndGg7IGkrKykge1xuICAgICAgICBjb25zdCB0YWJsZVJvdyA9IHRhYmxlLnJvd3NbaV07IGNvbnN0IHJvd0RhdGEgPSB7fTtcbiAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCB0YWJsZVJvdy5jZWxscy5sZW5ndGg7IGorKykge1xuICAgICAgICAgIHJvd0RhdGFbaGVhZGVyc1tqXV0gPSB0YWJsZVJvdy5jZWxsc1tqXS5pbm5lckhUTUw7XG4gICAgICAgIH1cbiAgICAgICAgZGF0YS5wdXNoKHJvd0RhdGEpO1xuICAgICAgfVxuICAgICAgY29uc3QganNvblN0cmluZyA9IEpTT04uc3RyaW5naWZ5KGRhdGEpO1xuICAgICAgY29uc3QganNvbkJhc2U2NCA9IGJ0b2EoanNvblN0cmluZyk7XG4gICAgICBjb25zdCBkYXRhU3RyID0gJ2RhdGE6dGV4dC9qc29uO2Jhc2U2NCwnICsganNvbkJhc2U2NDtcbiAgICAgIGlmIChjb25maWcuZG93bmxvYWQpIHtcbiAgICAgICAgdGhpcy5kb3dubG9hZEZyb21EYXRhVVJMKGNvbmZpZy5maWxlTmFtZSwgZGF0YVN0cik7XG4gICAgICAgIG9ic2VydmVyLm5leHQoKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIG9ic2VydmVyLm5leHQoZGF0YSk7XG4gICAgICB9XG4gICAgICBvYnNlcnZlci5jb21wbGV0ZSgpO1xuICAgIH0pO1xuICB9XG5cbiAgcHJpdmF0ZSBnZXRYTUwoY29uZmlnOiBFeHBvcnRBc0NvbmZpZyk6IE9ic2VydmFibGU8c3RyaW5nIHwgbnVsbD4ge1xuICAgIHJldHVybiBPYnNlcnZhYmxlLmNyZWF0ZSgob2JzZXJ2ZXIpID0+IHtcbiAgICAgIGxldCB4bWwgPSAnPD94bWwgdmVyc2lvbj1cIjEuMFwiIGVuY29kaW5nPVwiVVRGLThcIj8+PFJvb3Q+PENsYXNzZXM+JztcbiAgICAgIGNvbnN0IHRyaXRlbSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGNvbmZpZy5lbGVtZW50SWQpLmdldEVsZW1lbnRzQnlUYWdOYW1lKCd0cicpO1xuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0cml0ZW0ubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgY29uc3QgY2VsbGRhdGEgPSB0cml0ZW1baV07XG4gICAgICAgIGlmIChjZWxsZGF0YS5jZWxscy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgeG1sICs9ICc8Q2xhc3MgbmFtZT1cIicgKyBjZWxsZGF0YS5jZWxsc1swXS50ZXh0Q29udGVudCArICdcIj5cXG4nO1xuICAgICAgICAgIGZvciAobGV0IG0gPSAxOyBtIDwgY2VsbGRhdGEuY2VsbHMubGVuZ3RoOyArK20pIHtcbiAgICAgICAgICAgIHhtbCArPSAnXFx0PGRhdGE+JyArIGNlbGxkYXRhLmNlbGxzW21dLnRleHRDb250ZW50ICsgJzwvZGF0YT5cXG4nO1xuICAgICAgICAgIH1cbiAgICAgICAgICB4bWwgKz0gJzwvQ2xhc3M+XFxuJztcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgeG1sICs9ICc8L0NsYXNzZXM+PC9Sb290Pic7XG4gICAgICBjb25zdCBiYXNlNjQgPSAnZGF0YTp0ZXh0L3htbDtiYXNlNjQsJyArIGJ0b2EoeG1sKTtcbiAgICAgIGlmIChjb25maWcuZG93bmxvYWQpIHtcbiAgICAgICAgdGhpcy5kb3dubG9hZEZyb21EYXRhVVJMKGNvbmZpZy5maWxlTmFtZSwgYmFzZTY0KTtcbiAgICAgICAgb2JzZXJ2ZXIubmV4dCgpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgb2JzZXJ2ZXIubmV4dChiYXNlNjQpO1xuICAgICAgfVxuICAgICAgb2JzZXJ2ZXIuY29tcGxldGUoKTtcbiAgICB9KTtcbiAgfVxuXG59XG4iLCIvKipcbiAqIGFuZ3VsYXIgaW1wb3J0c1xuICovXG5pbXBvcnQgeyBOZ01vZHVsZSB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuXG4vKipcbiAqIG15IGltcG9ydHNcbiAqL1xuXG5pbXBvcnQgeyBFeHBvcnRBc1NlcnZpY2UgfSBmcm9tICcuL2V4cG9ydC1hcy5zZXJ2aWNlJztcblxuQE5nTW9kdWxlKHtcbiAgcHJvdmlkZXJzOiBbRXhwb3J0QXNTZXJ2aWNlXSxcbn0pXG5leHBvcnQgY2xhc3MgRXhwb3J0QXNNb2R1bGUgeyB9XG5cblxuIl0sIm5hbWVzIjpbIk9ic2VydmFibGUiLCJYTFNYLnV0aWxzIiwiWExTWC53cml0ZSIsImh0bWxEb2N4LmFzQmxvYiIsIkluamVjdGFibGUiLCJOZ01vZHVsZSJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7O0FBQUEsSUFVQSxNQUFNLENBQUMsYUFBYSxDQUFDLEdBQUcsV0FBVyxDQUFDO0FBRXBDO1FBS0U7U0FBaUI7Ozs7O1FBRWpCLDZC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