{"version":3,"file":"ngx-export-as.js.map","sources":["ng://ngx-export-as/lib/export-as.service.ts","ng://ngx-export-as/lib/export-as.module.ts"],"sourcesContent":["import { Injectable } from '@angular/core';\nimport { Observable } from 'rxjs';\n\nimport { ExportAsConfig } from './export-as-config.model';\n\nimport html2canvas from 'html2canvas';\nimport * as jsPDF from 'jspdf';\nimport * as XLSX from 'xlsx';\nimport * as htmlDocx from 'html-docx-js/dist/html-docx';\n\nwindow['html2canvas'] = html2canvas;\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class ExportAsService {\n\n  constructor() { }\n\n  get(config: ExportAsConfig): Observable<string | null> {\n    const func = 'get' + config.type.toUpperCase();\n    if (this[func]) {\n      return this[func](config);\n    }\n\n    return Observable.create((observer) => { observer.error('Export type is not supported.'); });\n  }\n\n  save(config: ExportAsConfig, fileName: string): void {\n    config.download = true;\n    config.fileName = fileName + '.' + config.type;\n    this.get(config).subscribe();\n  }\n\n  contentToBlob(content: string): Observable<Blob> {\n    return Observable.create((observer) => {\n      const arr = content.split(','), mime = arr[0].match(/:(.*?);/)[1],\n        bstr = atob(arr[1]);\n      let n = bstr.length;\n      const u8arr = new Uint8Array(n);\n      while (n--) {\n        u8arr[n] = bstr.charCodeAt(n);\n      }\n      observer.next(new Blob([u8arr], { type: mime }));\n      observer.complete();\n    });\n  }\n\n  removeFileTypeFromBase64(fileContent: string): string {\n    const re = /^data:[^]*;base64,/g;\n    const newContent: string = re[Symbol.replace](fileContent, '');\n    return newContent;\n  }\n\n  addFileTypeToBase64(fileContent: string, fileMime: string): string {\n    return `data:${fileMime};base64,${fileContent}`;\n  }\n\n  downloadFromDataURL(fileName: string, dataURL: string): void {\n    this.contentToBlob(dataURL).subscribe(blob => {\n      this.downloadFromBlob(blob, fileName);\n    });\n  }\n\n  downloadFromBlob(blob: Blob, fileName: string) {\n    const element = document.createElement('a');\n    const url = window.URL.createObjectURL(blob);\n    element.setAttribute('download', fileName);\n    element.style.display = 'none';\n    document.body.appendChild(element);\n    element.href = url;\n    element.click();\n    document.body.removeChild(element);\n  }\n\n  private getPDF(config: ExportAsConfig): Observable<string | null> {\n    return Observable.create((observer) => {\n      const jspdf = new jsPDF();\n      const element: HTMLElement = document.getElementById(config.elementId);\n      jspdf.addHTML(element, function () {\n        if (config.download) {\n          jspdf.save(config.fileName);\n          observer.next();\n        } else {\n          observer.next(jspdf.output('datauristring'));\n        }\n        observer.complete();\n      });\n    });\n  }\n\n  private getPNG(config: ExportAsConfig): Observable<string | null> {\n    return Observable.create((observer) => {\n      const element: HTMLElement = document.getElementById(config.elementId);\n      html2canvas(element, config.options).then((canvas) => {\n        const imgData = canvas.toDataURL('image/PNG');\n        if (config.type === 'png' && config.download) {\n          this.downloadFromDataURL(config.fileName, imgData);\n          observer.next();\n        } else {\n          observer.next(imgData);\n        }\n        observer.complete();\n      }, err => {\n        observer.error(err);\n      });\n    });\n  }\n\n  private getCSV(config: ExportAsConfig): Observable<string | null> {\n    return Observable.create((observer) => {\n      const element: HTMLElement = document.getElementById(config.elementId);\n      const csv = [];\n      const rows: any = element.querySelectorAll('table tr');\n      rows.forEach((rowElement, index: number) => {\n        const row = [];\n        const cols = rowElement.querySelectorAll('td, th');\n        cols.forEach((col, colIndex: number) => {\n          row.push(col.innerText);\n        });\n        csv.push(row.join(','));\n      });\n      const csvContent = 'data:text/csv;base64,' + btoa(csv.join('\\n'));\n      if (config.download) {\n        this.downloadFromDataURL(config.fileName, csvContent);\n        observer.next();\n      } else {\n        observer.next(csvContent);\n      }\n      observer.complete();\n    });\n  }\n\n  private getTXT(config: ExportAsConfig): Observable<string | null> {\n    const nameFrags = config.fileName.split('.');\n    config.fileName = `${nameFrags[0]}.txt`;\n    return this.getCSV(config);\n  }\n\n  private getXLS(config: ExportAsConfig): Observable<string | null> {\n    return Observable.create((observer) => {\n\n      const element: HTMLElement = document.getElementById(config.elementId);\n      const ws3 = XLSX.utils.table_to_sheet(element, config.options);\n      const wb = XLSX.utils.book_new();\n      XLSX.utils.book_append_sheet(wb, ws3, config.fileName);\n      const out = XLSX.write(wb, { type: 'base64' });\n      const xlsContent = 'data:application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;base64,' + out;\n      if (config.download) {\n        this.downloadFromDataURL(config.fileName, xlsContent);\n        observer.next();\n      } else {\n        observer.next(xlsContent);\n      }\n      observer.complete();\n    });\n  }\n\n  private getXLSX(config: ExportAsConfig): Observable<string | null> {\n    return this.getXLS(config);\n  }\n\n  private getDOCX(config: ExportAsConfig): Observable<string | null> {\n    return Observable.create((observer) => {\n      const contentDocument: string = document.getElementById(config.elementId).outerHTML;\n      const content = '<!DOCTYPE html>' + contentDocument;\n      const converted = htmlDocx.asBlob(content, config.options);\n      if (config.download) {\n        this.downloadFromBlob(converted, config.fileName);\n        observer.next();\n        observer.complete();\n      } else {\n        const reader = new FileReader();\n        reader.onloadend = () => {\n          const base64data = reader.result;\n          observer.next(base64data);\n          observer.complete();\n        };\n        reader.readAsDataURL(converted);\n      }\n    });\n  }\n\n  private getDOC(config: ExportAsConfig): Observable<string | null> {\n    return this.getDOCX(config);\n  }\n\n  private getJSON(config: ExportAsConfig): Observable<any[] | null> {\n    return Observable.create((observer) => {\n      const data = []; // first row needs to be headers\n      const headers = [];\n      const table = <HTMLTableElement>document.getElementById(config.elementId);\n      for (let index = 0; index < table.rows[0].cells.length; index++) {\n        headers[index] = table.rows[0].cells[index].innerHTML.toLowerCase().replace(/ /gi, '');\n      }\n      // go through cells\n      for (let i = 1; i < table.rows.length; i++) {\n        const tableRow = table.rows[i]; const rowData = {};\n        for (let j = 0; j < tableRow.cells.length; j++) {\n          rowData[headers[j]] = tableRow.cells[j].innerHTML;\n        }\n        data.push(rowData);\n      }\n      const jsonString = JSON.stringify(data);\n      const jsonBase64 = btoa(jsonString);\n      const dataStr = 'data:text/json;base64,' + jsonBase64;\n      if (config.download) {\n        this.downloadFromDataURL(config.fileName, dataStr);\n        observer.next();\n      } else {\n        observer.next(data);\n      }\n      observer.complete();\n    });\n  }\n\n  private getXML(config: ExportAsConfig): Observable<string | null> {\n    return Observable.create((observer) => {\n      let xml = '<?xml version=\"1.0\" encoding=\"UTF-8\"?><Root><Classes>';\n      const tritem = document.getElementById(config.elementId).getElementsByTagName('tr');\n      for (let i = 0; i < tritem.length; i++) {\n        const celldata = tritem[i];\n        if (celldata.cells.length > 0) {\n          xml += '<Class name=\"' + celldata.cells[0].textContent + '\">\\n';\n          for (let m = 1; m < celldata.cells.length; ++m) {\n            xml += '\\t<data>' + celldata.cells[m].textContent + '</data>\\n';\n          }\n          xml += '</Class>\\n';\n        }\n      }\n      xml += '</Classes></Root>';\n      const base64 = 'data:text/xml;base64,' + btoa(xml);\n      if (config.download) {\n        this.downloadFromDataURL(config.fileName, base64);\n        observer.next();\n      } else {\n        observer.next(base64);\n      }\n      observer.complete();\n    });\n  }\n\n}\n","/**\n * angular imports\n */\nimport { NgModule } from '@angular/core';\n\n/**\n * my imports\n */\n\nimport { ExportAsService } from './export-as.service';\n\n@NgModule({\n  providers: [ExportAsService],\n})\nexport class ExportAsModule { }\n\n\n"],"names":["XLSX.utils","XLSX.write","htmlDocx.asBlob"],"mappings":"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"}
