<div class="content-wrapper">
    <section class="content">
        <div class="row">
            <div class="col-xl-12 connectedSortable">
                <div class="box box-info">
                    <div class="box-body">
                        <div class="row m-b-20">
                            <div class="col-xl-3">
                                <div class="form-group">
                                    <label  >State</label>
                                    <ng-multiselect-dropdown  [placeholder]="'Select State'" [data]="states" [settings]="stateDropdownSettings"
                                        [(ngModel)]="selectedStates" (onSelect)="selectState($event)" (onSelectAll)="selectAllStates($event)"
                                        (onDeSelect)="unSelectState($event)" (onDeSelectAll)="unSelectAllStates($event)">
                                    </ng-multiselect-dropdown>
                                </div>
                            </div>
                            <div class="col-xl-3">
                                <div class="form-group">
                                    <label>District</label>
                                    <ng-multiselect-dropdown [placeholder]="'Select District'" [data]="districts"
                                        [settings]="districtDropdownSettings" [(ngModel)]="selectedDistricts"
                                        (onSelect)="selectDistrict($event)" (onSelectAll)="selectAllDistricts($event)"
                                        (onDeSelect)="unSelectDistrict($event)" (onDeSelectAll)="unSelectAllDistricts($event)">
                                    </ng-multiselect-dropdown>
                                </div>
                            </div>
                            <div class="col-xl-3">
                                <div class="form-group">
                                    <label>Branch</label>
                                    <ng-multiselect-dropdown [placeholder]="'Select Branch'" [data]="branches"
                                        [settings]="branchDropdownSettings" [(ngModel)]="selectedBranches" (onSelect)="selectBranch($event)"
                                        (onSelectAll)="selectAllBranches($event)" (onDeSelect)="unSelectBranch($event)"
                                        (onDeSelectAll)="unSelectAllBranches($event)">
                                    </ng-multiselect-dropdown>
                                </div>
                            </div>
                            <div class="col-xl-3">
                                <div class="form-group">
                                    <label>Course</label>
                                    <ng-multiselect-dropdown [placeholder]="'Select Course'" [data]="courses"
                                        [settings]="courseDropdownSettings" [(ngModel)]="selectedCourses" (onSelect)="selectCourse($event)"
                                        (onSelectAll)="selectAllCourses($event)" (onDeSelect)="unSelectCourse($event)"
                                        (onDeSelectAll)="unSelectAllCourses($event)">
                                    </ng-multiselect-dropdown>
                                </div>
                            </div>
                            <!-- <div class="col-xl-3">
                                <div class="form-group">
                                    <label>Subject</label>
                                    <ng-multiselect-dropdown [placeholder]="'Select Subject'" [data]="subjects"
                                        [settings]="subjectDropdownSettings" [(ngModel)]="selectedSubjects"
                                        (onSelectAll)="selectAllSubjects($event)" (onDeSelectAll)="unSelectAllSubjects($event)">
                                    </ng-multiselect-dropdown>
                                </div>
                            </div> -->

                            <!-- <div class="col-xl-6 center">
<h2 class="text-danger mt-3">Audio Video Modules Reports</h2>

                            </div> -->
                            <div class="col-xl-3">
                                <div class="form-group">
                                    <label>Start Date</label>
                                    <div class="input-group">
                                        <input class="form-control" placeholder="yyyy-mm-dd" name="dp" [(ngModel)]="startDate"
                                            ngbDatepicker #s="ngbDatepicker">
                                        <div class="input-group-append">
                                            <button class="btn btn-outline-secondary calendar" (click)="s.toggle()"
                                                type="button"></button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-xl-3">
                                <div class="form-group">
                                    <label>End Date</label>
                                    <div class="input-group">
                                        <input class="form-control" placeholder="yyyy-mm-dd" name="dp" [(ngModel)]="endDate"
                                            ngbDatepicker #e="ngbDatepicker">
                                        <div class="input-group-append">
                                            <button class="btn btn-outline-secondary calendar" (click)="e.toggle()"
                                                type="button"></button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-xl-3">
                                    <div class="form-group mt-3">
                                    <input type="checkbox" value=" "  id="cbhshowtable"> <label for="cbhshowtable" (click)="showTable()"> Show Table</label>



                                    <input type="checkbox" value=" "  id="cbhshowchart"> <label for="cbhshowchart"  (click)="showChart()"> Show Chart</label>
                                    
                                </div>
                                <!-- <div class="form-group">
                                    <button id="btnShowTable" class="btn btn-theme mt-3" name="btnShowTable" (click)="showTable()">Show
                                        Table</button>&nbsp;
                                    <button id="btnShowChart" class="btn btn-theme mt-3" name="btnShowChart" (click)="showChart()">Show
                                        Chart</button>
                                </div> -->
                            </div>
                            <!-- <div class="col-xl-3">
                                <div class="form-group">
                                    <button id="btnSubmit" class="btn btn-theme mt-3" name="btnSubmit" (click)="getReportData()">Submit</button>
                                </div>
                            </div> -->
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="row mt-2">
            <div class="col-xl-12 connectedSortable">
                <div class="box box-info">
                    <div class="box-body rowheight">
                            <div id="" style="overflow-y:auto; height:400px;" >


                        <div class="media-table-block"  *ngIf="showReportData">
                            <table class="table table-striped table-bordered media-table" style="border: 1;">
                                <thead>
                                    <tr>
                                        <th *ngFor="let column of reportData.columns" [class.active]="order === column"
                                            [ngStyle]="{'text-align':column.align}" (click)="setOrder(column.name)">
                                            <span [innerHtml]="column.name"></span>
                                            <span *ngIf="dataCount" style="cursor: pointer; float: right;">
                                                <span [hidden]="reverse">▼</span>
                                                <span [hidden]="!reverse">▲</span>
                                            </span>
                                        </th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr *ngFor="let item of reportData.data | orderBy: order:!reverse:'case-insensitive' | paginate: { itemsPerPage: 10, currentPage: page };">
                                        <td *ngFor="let column of reportData.columns" data-toggle="modal" data-target="#divSelectedRowModal"
                                            [ngStyle]="{'text-align':column.align, 'cursor': 'pointer'}" (click)="getDetailedReport(item)">
                                            <span [innerHtml]="item[column.name]"></span>
                                        </td>
                                    </tr>
                                    <tr *ngIf="!dataCount" style="text-align:center">
                                        <td [attr.colspan]="noDataColspan">No data available</td>
                                    </tr>
                                </tbody>
                                <tfoot *ngIf="dataCount">
                                    <tr>
                                        <td [attr.colspan]="grandTotalColspan">
                                            <b style="color: #333333">Grand Total</b>
                                        </td>
                                        <td *ngFor="let footerColumn of reportData.footerTotalValues" [ngStyle]="{'text-align':footerColumn.align}">
                                            <b style="color: #333333">{{footerColumn.value}}</b>
                                        </td>
                                    </tr>
                                </tfoot>
                            </table>
                            <pagination-controls *ngIf="dataCount" class="paginations-block" (pageChange)="page=$event"></pagination-controls>
                        </div>

                    </div>

                        <div id="divSelectedRowModal" class="modal" [ngStyle]="{'display':showModalPopup}" *ngIf="showDetailedReportData">
                            <div class="modal-dialog modal-lg" role="document">
                                <div class="modal-content">
                                    <div class="modal-header">
                                        <h6 class="mt-2">Detailed report for {{detailedReportName}}</h6>
                                        <button type="button" class="close" aria-label="Close" (click)="closeDetailedReport()"><span
                                                aria-hidden="true">&times;</span></button>
                                    </div>
                                    <div class="modal-body">
                                        <div class="media-table-block">
                                            <table class="table table-striped table-bordered media-table" style="border: 1;">
                                                <thead>
                                                    <tr>
                                                        <th *ngFor="let column of detailedReportData.columns"
                                                            [class.active]="detailedReportOrder === column" [ngStyle]="{'text-align':column.align}"
                                                            (click)="detailedReportSetOrder(column)">
                                                            <span [innerHtml]="column.name"></span>
                                                            <span *ngIf="detailedReportDataCount" style="cursor: pointer; float: right;">
                                                                <span [hidden]="detailedReportReverse">▼</span>
                                                                <span [hidden]="!detailedReportReverse">▲</span>
                                                            </span>
                                                        </th>
                                                    </tr>
                                                </thead>
                                                <tbody>
                                                    <tr *ngFor="let item of detailedReportData.data | orderBy: detailedReportOrder:!detailedReportReverse:'case-insensitive' | paginate: { itemsPerPage: 10, currentPage: detailedReportPage };">
                                                        <td *ngFor="let column of detailedReportData.columns" [ngStyle]="{'text-align':column.align, 'cursor': 'pointer'}">
                                                            <span [innerHtml]="item[column.name]"></span>
                                                        </td>
                                                    </tr>
                                                    <tr *ngIf="!detailedReportDataCount" style="text-align:center">
                                                        <td [attr.colspan]="detailedReportNoDataColspan">No data
                                                            available</td>
                                                    </tr>
                                                </tbody>
                                                <tfoot *ngIf="detailedReportDataCount">
                                                    <tr>
                                                        <td [attr.colspan]="detailedReportGrandTotalColspan">
                                                            <b style="color: #333333">Grand Total</b>
                                                        </td>
                                                        <td *ngFor="let footerColumn of detailedReportData.footerTotalValues"
                                                            [ngStyle]="{'text-align':footerColumn.align}">
                                                            <b style="color: #333333">{{footerColumn.value}}</b>
                                                        </td>
                                                    </tr>
                                                </tfoot>
                                            </table>
                                            <pagination-controls *ngIf="detailedReportDataCount" class="paginations-block"
                                                (pageChange)="detailedReportPage=$event"></pagination-controls>
                                        </div>
                                        <!-- <div style="width: 28%;  float: left; padding:5px;">
                                            <ngx-charts-bar-vertical [view]="barChartView" [scheme]="barChartColorScheme"
                                                [results]="barChartData" [gradient]="false" [xAxis]="true" [yAxis]="true"
                                                [showXAxisLabel]="true" [showYAxisLabel]="true" [legend]="false">
                                                <ng-template #tooltipTemplate let-model="model">
                                                    <h1>
                                                        {{model.name}}
                                                    </h1>
                                                    <h2>{{getTargetDuration(model.name)}}</h2>
                                                </ng-template>
                                            </ngx-charts-bar-vertical>
                                        </div> -->
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="row mt-2" *ngIf="showChartData">
            <div class="col-xl-12 connectedSortable">
            <div class="box box-info">
                <div class="box-body rowheight">
                    <div class="media-table-block">
                        <!-- <ngx-charts-pie-chart [view]="pieChartView" [scheme]="pieChartColorScheme" [results]="pieChartData"
                            [legend]="false" [explodeSlices]="false" [labels]="false" [doughnut]="true" [gradient]="false"
                            [animations]="true">
                            <ng-template #tooltipTemplate let-model="model">
                                <h1>
                                    {{model.name}}
                                </h1>
                                <h2>{{getTargetDuration(model.name)}}</h2>
                            </ng-template>
                        </ngx-charts-pie-chart> -->
                        <ngx-charts-bar-vertical [view]="barChartView" [scheme]="barChartColorScheme" [results]="barChartData"
                            [gradient]="false" [xAxis]="true" [yAxis]="true" [showXAxisLabel]="true" [showYAxisLabel]="true"
                            [legend]="true" [showDataLabel]="true" [xAxisLabel]="barChartXAxisLabel" [yAxisLabel]="barChartYAxisLabel">
                            <ng-template #tooltipTemplate let-model="model">
                                <p>
                                    {{model.name}}
                                </p>
                                <p>{{getTargetDuration(model.name)}}</p>
                            </ng-template>
                        </ngx-charts-bar-vertical>
                    </div>
                </div>
            </div>

        </div>

        </div>
    </section>
</div>